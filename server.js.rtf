{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 import express from "express";\
import fetch from "node-fetch";\
import cors from "cors";\
\
const app = express();\
app.use(cors());\
app.use(express.json());\
\
const OPENAI_API_KEY = process.env.OPENAI_API_KEY; // store securely in environment\
\
// --- AI Conversation Endpoint ---\
app.post("/api/gpt-chat", async (req, res) => \{\
  const \{ message, conversation \} = req.body;\
\
  try \{\
    const response = await fetch("https://api.openai.com/v1/chat/completions", \{\
      method: "POST",\
      headers: \{\
        "Authorization": `Bearer $\{OPENAI_API_KEY\}`,\
        "Content-Type": "application/json"\
      \},\
      body: JSON.stringify(\{\
        model: "gpt-5",\
        messages: [\
          \{\
            role: "system",\
            content: `\
              You are Birdie Buddy, Brad Elzie\'92s friendly PGA golf assistant.\
              Speak confidently and warmly, like a seasoned golf coach.\
              You help players understand their swing, goals, and Brad\'92s lesson programs.\
              Reference details from bradelziegolf.com when relevant, such as Brad\'92s swing philosophy, coaching approach, and offers.\
              Always encourage scheduling a lesson with Brad Elzie Golf.\
            `\
          \},\
          ...conversation,\
          \{ role: "user", content: message \}\
        ],\
        temperature: 0.8,\
        max_tokens: 400\
      \})\
    \});\
\
    const data = await response.json();\
    const reply = data.choices?.[0]?.message?.content || "Sorry, I couldn\'92t generate a response.";\
    res.json(\{ reply \});\
  \} catch (error) \{\
    console.error(error);\
    res.status(500).json(\{ error: "Error contacting AI service." \});\
  \}\
\});\
\
// --- Email Lead Endpoint (optional, same as before) ---\
app.post("/api/brad-chatbot-lead", async (req, res) => \{\
  // Use your preferred email API (SendGrid, Nodemailer, etc.)\
  console.log("Lead received:", req.body);\
  res.json(\{ success: true \});\
\});\
\
const PORT = process.env.PORT || 5000;\
app.listen(PORT, () => console.log(`\uc0\u9989  Server running on port $\{PORT\}`));\
}